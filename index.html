<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles/style.css">
    <link rel="stylesheet" href="styles/cardstarter.css">
    <script defer src="scripts/main.js"></script>
    <title>BlackJack</title>
    

</head>
<body>
    <center>
        <div>
          <video style='width: 100px; height: 100px;' id="vid"></video>
        </div>
        <br />
        <button id="but" autoplay>
          Open WebCam
        </button>
        <button id="click-photo">Click Photo</button>
        <canvas id="canvas" width="320" height="240"></canvas>
        <button id="openCam">Take Photo</button>
        <button id="scanner">Scanner</button>
        <button id="send">Send Photo</button>
        <button id="scanned">Send Scanned</button>
        <button id="sendLocation">Send Location</button>
        <input id="message" value="" />
        <input id="username" value="" />
        <input id="password" value="" />
        <button id="external">One Signal</button>
        <button id="toast">Toast</button>
        <button id="pdfView">PDF</button>
        <button id="login">login</button>
        <button id="url">url</button>
        
        <img id="scannedCode" src="" />
        <div id="myBase">Base64</div>
        <div id="myCode">Scanned Code</div>
        <div id="lat">Lat</div>
        <div id="lon">Lon</div>
        <div id="acc">Accuracy</div>
      </center>

     
      
      
      <btn><a href="https://www.ekomgroup.com/kvkk-bilgilendirme/">Link</a></btn>
      <br>
          <!-- <div class="container"> 
              
              <div id="iPop">
                  <div id="close">&times;</div>
                  <button id="infobtn" class="btn info">i</button>
                  <img id="infoimg" src="images/infoPic.png">
              </div>
              <button id="decision" class="btn d">Keep playing?</button>
              <input id="userName" class="username" placeholder="Name Here" value="" />
              <div id="houseCount" class="count"></div>
              <div id="house" class="house" placeholder="house"></div>
              <button id="start" class="btn start">Start</button>
              <div id="display"></div>
              <div id="playerCount" class="count"></div>
              <div class="playerResponse">
                  <button id="hit" class="btn">Hit  </button>
                  <button id="stand" class="btn">Stand</button>
              </div>
              <div id="player" class="player" placeholder="player"></div>
              <div id="test"></div>   
          </div> -->


    <script>
      var video = document.querySelector("#vid");
      var but = document.getElementById("but");
        document.addEventListener("DOMContentLoaded", () => {
          // var but = document.getElementById("but");
          // var video = document.getElementById("vid");
          
          var mediaDevices = navigator.mediaDevices;
          vid.muted = true;
          but.addEventListener("click", () => {
    
            // Accessing the user camera and video.
            mediaDevices
              .getUserMedia({
                video: true,
                audio: true,
              })
              .then((stream) => {
                var constraints = {
                video: {
                  mandatory: {
                    width: { min: 640, ideal:1280 },
                    height: { min: 480, ideal:720 }
                  },
                    optional: [
                  { width: 650 },
                  { width: { min: 650 }},
                  { frameRate: 60 },
                  { width: { max: 800 }},
                  { facingMode: "user" }
                    ]
                  }    
                }
                // Changing the source of video to current stream.
                video.srcObject = stream;
                video.setAttribute("playsinline", true);
                video.addEventListener("loadedmetadata", () => {
                  video.play();
                });
              })
              .catch(alert);
          });
        });

        // let camera_button = document.querySelector("#start-camera");
// let video = document.querySelector("#vid");
let click_button = document.getElementById("send");
let canvas = document.querySelector("#canvas");
let scanner = document.getElementById("scanner")
let camera = document.getElementById("openCam")
let external = document.getElementById("external")
let scanned = document.getElementById("scanned")
let toast = document.getElementById("toast")
let userLocation = document.getElementById("sendLocation")
let inputField = document.getElementById("url")
let pdfView = document.getElementById("pdfView")
let login = document.getElementById("login")
// let codeImage = document.getElementById("scannedCode")
// camera_button.addEventListener('click', async function() {
//    	let stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: false });
// 	video.srcObject = stream;
// });

click_button.addEventListener('click', function() {
    // console.log('clicked');
    // document.getElementById('test').innerHTML = "clicked";
   	// canvas.getContext('2d').drawImage(video, 0, 0, canvas.width, canvas.height);
   	// let image_data_url = canvas.toDataURL('image/jpeg');

   	// // data url of the image
   	// console.log(image_data_url);
    webkit.messageHandlers.response.postMessage("send");
});



external.addEventListener('click', function() {

    webkit.messageHandlers.external.postMessage("Kircicegi Belediyesi");
});

var loginInput = {
     "username": "Hasan",
     "password": "123"
};


login.addEventListener('click', function() {

webkit.messageHandlers.login.postMessage(loginInput);
});


var pdfObj = {
     "pdfUrl": "https://platomapp.ekomgroup.com/download/pdf/newPDF33.pdf",
     "pdfTitle": "This is the Title",
     "pdfMessage": "Hello"
};


pdfView.addEventListener('click', function() {

webkit.messageHandlers.pdfView.postMessage(pdfObj);
});

inputField.addEventListener('click', function() {

webkit.messageHandlers.externalUrl.postMessage("https://www.ekomgroup.com/kvkk-bilgilendirme/");
});

userLocation.addEventListener('click', function() {

webkit.messageHandlers.userLocation.postMessage("location");
});



var toastMessage = {
     "alertType": "Success",
     "message": "You are great!"
};

toast.addEventListener('click', function() {

webkit.messageHandlers.toast.postMessage(toastMessage);
});

camera.addEventListener('click', function() {
  
    webkit.messageHandlers.bridge.postMessage("0.2");
});

scanner.addEventListener('click', function() {

    webkit.messageHandlers.scanner.postMessage("scanner");
});

scanned.addEventListener('click', function() {

    webkit.messageHandlers.scanned.postMessage("code");
});

// console.log('message =' , message);
// alert(message)


function sendPhotos(message) {


document.getElementById("myBase").innerHTML = message;
// document.getElementById("message").value = message;
document.getElementById("scannedCode").src=`data:image/png;base64, ${message}`
}


function scannedCode(message) {


document.getElementById("myCode").innerHTML = message;
// document.getElementById("message").value = message;

}

function changeInput(username, password) {

document.getElementById("username").value = username;
document.getElementById("password").value = password;


}


function sendObject(message){

document.getElementById("lat").innerHTML = message;
document.getElementById("lon").innerHTML = message.lon;
}

function sendLocation(latitude, longitude, accuracy ) {


document.getElementById("lat").innerHTML = latitude;
document.getElementById("lon").innerHTML = longitude;
document.getElementById("acc").innerHTML = accuracy;
// document.getElementById("message").value = message;

}

      </script>

</body>
</html>